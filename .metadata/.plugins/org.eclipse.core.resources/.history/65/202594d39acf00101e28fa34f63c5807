<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Apna Shop - Premium + Fresh Listings</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<style>
:root{
  --accent:#764ba2;
  --accent-2:#667eea;
  --fresh-green:#2e8b57;
  --muted:#6b6f76;
  --card-radius:14px;
}

/* global */
body{
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg, #fbfbfc 0%, #f5f8fb 100%);
  color:#222;
  margin:0;
  padding-top:70px;
}
.container-main{
  max-width:1300px;
  margin:18px auto;
  padding:20px;
}

/* HERO - keep simple */
.fresh-hero{
  height:320px;
  border-radius:12px;
  overflow:hidden;
  background: linear-gradient(90deg,#f0f6ff,#fff7f0);
  display:flex;
  align-items:center;
  justify-content:center;
  margin-bottom:22px;
  position:relative;
}
.fresh-hero .hero-inner{ text-align:center; }
.fresh-hero h1{ font-size:32px; margin-bottom:8px; color:#0f1724; font-weight:800; }
.fresh-hero p{ color:var(--muted); margin:0; }

/* SECTION TITLE */
.section-title{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:14px;
}
.section-title h2{ font-size:20px; margin:0; font-weight:700; color:#0b1220; }

/* ========== OFFERS (kept similar) ========== */
.offers-row{ display:flex; gap:12px; overflow:auto; padding-bottom:8px; }
.offer-card{
  min-width:220px;
  background:#fff;
  border-radius:12px;
  box-shadow:0 6px 18px rgba(16,24,40,0.06);
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
}
.offer-card img{ width:140px; height:120px; object-fit:contain; }
.offer-title{ font-weight:700; text-align:center; font-size:14px; color:#101827; height:38px; overflow:hidden; }
.offer-prices{ display:flex; gap:8px; align-items:center; }
.offer-prices .new{ color:#e53935; font-weight:800; font-size:18px; }
.offer-prices .old{ color:var(--muted); text-decoration:line-through; font-size:13px; }
.offer-tag{ background:linear-gradient(90deg,var(--accent-2),var(--accent)); color:#fff; padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px; }

/* ================= AMAZON PREMIUM LISTING (rich cards) ================= */
.premium-grid{ display:flex; flex-direction:column; gap:12px; }
.premium-item{
  background:#fff;
  border-radius:14px;
  padding:14px;
  box-shadow: 0 8px 30px rgba(16,24,40,0.06);
  display:flex;
  gap:14px;
  align-items:flex-start;
  transition:transform .12s ease, box-shadow .12s ease;
}
.premium-item:hover{ transform:translateY(-6px); box-shadow:0 18px 40px rgba(16,24,40,0.12); }

.premium-media{
  width:260px;
  min-width:160px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: linear-gradient(180deg,#fafbfd,#ffffff);
  border-radius:10px;
  padding:12px;
}
.premium-media img{
  max-width:100%;
  max-height:220px;
  object-fit:contain;
}

/* main info */
.premium-info{ flex:1; display:flex; flex-direction:column; gap:8px; }
.premium-title{ font-size:18px; font-weight:800; color:#071032; }
.premium-desc{ color:var(--muted); font-size:14px; line-height:1.4; max-height:60px; overflow:hidden; }
.premium-meta{ display:flex; gap:12px; align-items:center; color:var(--muted); font-size:13px; }

/* price box */
.price-box{
  display:flex;
  align-items:center;
  gap:12px;
  margin-top:6px;
}
.price-new{ font-size:22px; font-weight:900; color:#d32f2f; }
.price-old{ text-decoration:line-through; color:var(--muted); font-size:14px; }

/* actions */
.premium-actions{ display:flex; gap:10px; margin-top:10px; align-items:center; }
.btn-buy{
  background: linear-gradient(90deg,#ffd54a,#ffca28);
  border:none;
  color:#111;
  padding:10px 18px;
  border-radius:8px;
  font-weight:800;
  box-shadow:0 6px 16px rgba(255,198,30,0.18);
}
.btn-add{
  background:#fff;
  border:1px solid #e6e9ef;
  padding:10px 14px;
  border-radius:8px;
  color:#0b1220;
}
.rating-stars{ color:#fbbf24; }

/* small badge (discount percent) */
.discount-badge{
  background:linear-gradient(90deg,#ff6b6b,#ff3d3d);
  color:#fff;
  font-weight:800;
  padding:6px 10px;
  border-radius:8px;
  font-size:13px;
}

/* ================= AMAZON FRESH (compact green) ================= */
.fresh-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:14px; margin-top:8px; }
.fresh-card{
  background:#fff;
  border-radius:12px;
  padding:12px;
  box-shadow:0 6px 20px rgba(16,24,40,0.06);
  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:center;
  transition:transform .12s ease;
}
.fresh-card:hover{ transform:translateY(-6px); }

.fresh-img{
  width:100%;
  height:110px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(180deg,#fbfff9,#f6fff5);
  border-radius:8px;
  padding:8px;
}
.fresh-img img{ max-width:100%; max-height:100%; object-fit:contain; }

.fresh-title{ font-weight:700; font-size:14px; color:#0b1220; text-align:center; height:36px; overflow:hidden; }
.fresh-price-row{ display:flex; align-items:center; gap:8px; width:100%; justify-content:center; }
.fresh-new{ color:var(--fresh-green); font-weight:900; font-size:16px; }
.fresh-old{ color:var(--muted); text-decoration:line-through; font-size:13px; }
.fresh-actions{ display:flex; gap:8px; margin-top:6px; width:100%; }
.fresh-add{
  background:linear-gradient(90deg,#43a047,#2e7d32);
  color:#fff;
  border:none;
  padding:8px;
  border-radius:8px;
  flex:1;
  font-weight:800;
}
.fresh-wish{
  background:#fff;
  border:1px solid #e5e7eb;
  padding:8px;
  border-radius:8px;
}

/* responsive tweaks */
@media (max-width:992px){
  .premium-media{ width:180px; }
  .fresh-hero{ height:260px; }
}
@media (max-width:600px){
  .premium-item{ flex-direction:column; align-items:center; }
  .premium-media{ width:90%; }
  .premium-title{ font-size:16px; text-align:center; }
}
</style>
</head>
<body>

<%@ include file="header1.jsp" %>

<div class="container-main">

  <!-- HERO -->
  <div class="fresh-hero mb-3">
    <div class="hero-inner">
      <h1>FreshMart ‚Äî Best deals, delivered fast</h1>
      <p style="color:#475569">Groceries, staples, snacks & more ‚Äî curated for you.</p>
    </div>
  </div>

  <!-- OFFERS (unchanged logic) -->
  <div class="mb-4">
    <div class="section-title">
      <h2>üî• Top Offers</h2>
      <small style="color:var(--muted)">Grab limited time discounts</small>
    </div>

    <div class="offers-row">
      <c:forEach var="o" items="${offerProducts}">
        <div class="offer-card">
          <img src="${pageContext.request.contextPath}/assets/img/product_img/${o.image}" alt="${o.title}"/>
          <div class="offer-title">${o.title}</div>
          <div class="offer-prices">
            <div class="new">‚Çπ${o.discountPrice}</div>
            <div class="old">‚Çπ${o.price}</div>
          </div>
          <div style="display:flex;gap:8px;align-items:center;">
            <div class="offer-tag">${o.discount}% OFF</div>
          </div>
          <div style="width:100%;margin-top:6px;">
            <form action="addToCart" method="post" style="display:flex; gap:8px;">
              <input type="hidden" name="productId" value="${o.id}"/>
              <button type="submit" class="btn btn-sm btn-warning w-100" style="font-weight:800;">
                <i class="fa fa-cart-plus"></i> Add to cart
              </button>
            </form>
          </div>
        </div>
      </c:forEach>
    </div>
  </div>

  <!-- CATEGORIES (unchanged forEach) -->
  <div class="mb-4">
    <div class="section-title">
      <h2>üìÇ Shop by Category</h2>
      <small style="color:var(--muted)">Filter products by category</small>
    </div>

    <div class="row">
      <c:forEach var="c" items="${categories}">
        <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-3">
          <a href="products?categories=${c.name}" class="text-decoration-none">
            <div class="category-card p-3 text-center">
              <img src="${pageContext.request.contextPath}/assets/img/category_img/${c.imageName}" class="category-img mb-2" alt="${c.name}"/>
              <div style="font-weight:700;color:#0b1220">${c.name}</div>
            </div>
          </a>
        </div>
      </c:forEach>
    </div>
  </div>

  <!-- AMAZON PREMIUM STYLE SECTION -->
  <div class="mb-5">
    <div class="section-title">
      <h2>‚≠ê Premium Listings</h2>
      <small style="color:var(--muted)">Detailed product cards ‚Äî rich info</small>
    </div>

    <div class="premium-grid">
      <c:forEach var="p" items="${products}">
        <div class="premium-item">
          <div class="premium-media">
            <a href="${pageContext.request.contextPath}/products?id=${p.id}">
              <img src="${pageContext.request.contextPath}/assets/img/product_img/${p.image}" alt="${p.title}"/>
            </a>
          </div>

          <div class="premium-info">
            <div style="display:flex;justify-content:space-between;align-items:start;">
              <div>
                <div class="premium-title">${p.title}</div>
                <div class="premium-desc">${p.description}</div>
                <div class="premium-meta mt-2">
                  <div class="rating-stars">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-half-stroke"></i>
                  </div>
                  <div style="margin-left:8px;color:var(--muted)">(${p.reviews != null ? p.reviews : '120'})</div>
                </div>
              </div>

              <div style="text-align:right;">
                <div class="discount-badge">${p.discount}%</div>
              </div>
            </div>

            <div class="price-box">
              <div class="price-new">‚Çπ${p.discountPrice}</div>
              <div class="price-old">‚Çπ${p.price}</div>
            </div>

            <div class="premium-actions">
              <form action="addToCart" method="post" style="display:flex;gap:8px;">
                <input type="hidden" name="productId" value="${p.id}"/>
                <button class="btn-buy" type="submit"><i class="fa fa-cart-plus"></i> Add to cart</button>
              </form>

              <a href="${pageContext.request.contextPath}/products?id=${p.id}" class="btn-add">View details</a>

              <button class="btn btn-outline-secondary" style="border-radius:8px;padding:8px 10px;">
                <i class="fa fa-heart"></i>
              </button>
            </div>
          </div>
        </div>
      </c:forEach>
    </div>
  </div>

  <!-- AMAZON FRESH STYLE (compact grid) -->
  <div class="mb-5">
    <div class="section-title">
      <h2>üåø Fresh Picks (Compact)</h2>
      <small style="color:var(--muted)">Quick add ‚Äî best for groceries</small>
    </div>

    <div class="fresh-grid">
      <c:forEach var="p" items="${products}">
        <div class="fresh-card">
          <a href="${pageContext.request.contextPath}/products?id=${p.id}" style="text-decoration:none;color:inherit;">
            <div class="fresh-img">
              <img src="${pageContext.request.contextPath}/assets/img/product_img/${p.image}" alt="${p.title}"/>
            </div>
          </a>

          <div class="fresh-title">${p.title}</div>

          <div class="fresh-price-row">
            <div class="fresh-new">‚Çπ${p.discountPrice}</div>
            <div class="fresh-old">‚Çπ${p.price}</div>
          </div>

          <div style="display:flex; gap:8px; width:100%;">
            <form action="addToCart" method="post" style="flex:1;">
              <input type="hidden" name="productId" value="${p.id}"/>
              <button class="fresh-add w-100" type="submit"><i class="fa fa-cart-plus"></i> Add</button>
            </form>
            <button class="fresh-wish"><i class="fa fa-heart"></i></button>
          </div>
        </div>
      </c:forEach>
    </div>
  </div>

</div>

<%@ include file="Footar.jsp" %>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
