<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apna Shop - Premium Shopping Experience</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Premium CSS -->
    <style>
        :root {
            --primary-color: #6c63ff;
            --secondary-color: #ff6584;
            --premium-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --dark-color: #2a2d3b;
        }

        body {
            background: linear-gradient(-45deg,#ee7752,#e73c7e,#23a6d5,#23d5ab);
            background-size:400% 400%;
            animation: gradient 15s ease infinite;
            font-family: 'Poppins', sans-serif;
        }

        @keyframes gradient {
            0% { background-position:0% 50%; }
            50% { background-position:100% 50%; }
            100% { background-position:0% 50%; }
        }

        .main-container {
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            margin: 25px auto;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        /* Section Heading */
        .section-title {
            text-align:center;
            font-weight:700;
            color:var(--dark-color);
            margin-bottom:25px;
            position:relative;
        }

        .section-title::after {
            content:'';
            width:60px;
            height:4px;
            background:var(--premium-gradient);
            position:absolute;
            bottom:-10px;
            left:50%;
            transform:translateX(-50%);
        }

        /* Category Card */
        .category-card {
            border:none;
            border-radius:15px;
            background:rgba(255,255,255,0.95);
            backdrop-filter:blur(10px);
            transition:0.4s;
            box-shadow:0 5px 15px rgba(0,0,0,0.1);
        }

        .category-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow:0 15px 30px rgba(0,0,0,0.2);
        }

        .category-img {
            height:120px;
            object-fit:contain;
            padding:10px;
            transition:0.4s;
        }

        .category-card:hover .category-img {
            transform:scale(1.1);
        }

        .category-link {
            font-weight:600;
            color:var(--dark-color);
        }

        .category-link:hover {
            color:var(--primary-color);
        }

        /* Product Card */
        .product-card {
            border:none;
            border-radius:15px;
            background:rgba(255,255,255,0.95);
            backdrop-filter:blur(10px);
            transition:0.4s;
            box-shadow:0 5px 15px rgba(0,0,0,0.1);
        }

        .product-card:hover {
            transform:translateY(-10px) rotate(1deg);
            box-shadow:0 15px 30px rgba(0,0,0,0.2);
        }

        .product-img {
            height:180px;
            object-fit:contain;
            padding:10px;
            transition:0.4s;
        }

        .product-card:hover .product-img {
            transform:scale(1.1);
        }

        .product-title {
            font-weight:600;
            color:var(--dark-color);
        }

        .product-title:hover {
            color:var(--primary-color);
        }

        .bg-section {
            background:rgba(255,255,255,0.9);
            padding:2rem;
            border-radius:20px;
            margin-bottom:2.5rem;
            box-shadow:0 10px 25px rgba(0,0,0,0.12);
        }
    </style>
</head>

<body>

    <%@ include file="header1.jsp" %>

    <div class="main-container container">

        <!-- ⭐ CATEGORY SECTION -->
        <div class="bg-section">
            <h2 class="section-title">Shop by Category</h2>

            <div class="row g-4">
                <c:forEach var="c" items="${categories}" varStatus="loop">
                    <div class="col-6 col-md-4 col-lg-2">
                        <div class="card category-card" style="animation-delay:${loop.index * 0.1}s;">
                            <div class="card-body text-center">
                                <img src="../assets/img/category_img/${c.imageName}" class="category-img" alt="${c.name}">
                                <div class="mt-2">
                                    <a href="products?categories=${c.name}" class="category-link text-decoration-none">
                                        ${c.name}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </c:forEach>
            </div>
        </div>

        <!-- ⭐ LATEST PRODUCT SECTION -->
        <div class="bg-section">
            <h2 class="section-title">Latest Products</h2>

            <div class="row g-4">
                <c:forEach var="p" items="${products}" varStatus="loop">
                    <div class="col-6 col-md-4 col-lg-3">
                        <div class="card product-card" style="animation-delay:${loop.index * 0.1}s;">
                            <div class="card-body text-center">
                                <img src="../assets/img/product_img/${p.image}" class="product-img" alt="${p.title}">
                                <div class="mt-2">
                                    <a href="products/${p.id}" class="product-title text-decoration-none">
                                        ${p.title}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </c:forEach>
            </div>
        </div>

    </div>

</body>
</html>
